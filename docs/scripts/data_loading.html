<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Chargement des données – Mandat analyse de données de ventes Dunin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../scripts/data_cleaning.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-b343bb23504f009ddf7b24643a6af19a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../scripts/data_collection.html">Phase 1 : collecte de données</a></li><li class="breadcrumb-item"><a href="../scripts/data_loading.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chargement des données</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Mandat analyse de données de ventes Dunin</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/datchaa/dunin_etl" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Acceuil</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Phase 1 : collecte de données</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../scripts/data_collection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Collecte et extractions des données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../scripts/data_cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Néttoyage et transformations des données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../scripts/data_loading.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chargement des données</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Phase 2 : Implémentation de l'architecture ETL (Microsoft SSIS)</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#architecture-du-data-warehouse" id="toc-architecture-du-data-warehouse" class="nav-link active" data-scroll-target="#architecture-du-data-warehouse"><span class="header-section-number">4.1</span> Architecture du Data Warehouse</a></li>
  <li><a href="#philosophie-de-modélisation" id="toc-philosophie-de-modélisation" class="nav-link" data-scroll-target="#philosophie-de-modélisation"><span class="header-section-number">4.2</span> Philosophie de modélisation</a></li>
  <li><a href="#tables-de-dimensions" id="toc-tables-de-dimensions" class="nav-link" data-scroll-target="#tables-de-dimensions"><span class="header-section-number">4.3</span> Tables de dimensions</a>
  <ul class="collapse">
  <li><a href="#dim_dates---dimension-temporelle-universelle" id="toc-dim_dates---dimension-temporelle-universelle" class="nav-link" data-scroll-target="#dim_dates---dimension-temporelle-universelle"><span class="header-section-number">4.3.1</span> DIM_DATES - Dimension temporelle universelle</a></li>
  <li><a href="#dim_clients---dimension-client-consolidée" id="toc-dim_clients---dimension-client-consolidée" class="nav-link" data-scroll-target="#dim_clients---dimension-client-consolidée"><span class="header-section-number">4.3.2</span> DIM_CLIENTS - Dimension client consolidée</a></li>
  <li><a href="#dim_projets---contexte-projet-enrichi" id="toc-dim_projets---contexte-projet-enrichi" class="nav-link" data-scroll-target="#dim_projets---contexte-projet-enrichi"><span class="header-section-number">4.3.3</span> DIM_PROJETS - Contexte projet enrichi</a></li>
  <li><a href="#dim_representants---force-de-vente" id="toc-dim_representants---force-de-vente" class="nav-link" data-scroll-target="#dim_representants---force-de-vente"><span class="header-section-number">4.3.4</span> DIM_REPRESENTANTS - Force de vente</a></li>
  <li><a href="#dim_adresses---géolocalisation" id="toc-dim_adresses---géolocalisation" class="nav-link" data-scroll-target="#dim_adresses---géolocalisation"><span class="header-section-number">4.3.5</span> DIM_ADRESSES - Géolocalisation</a></li>
  </ul></li>
  <li><a href="#table-de-fait-principale" id="toc-table-de-fait-principale" class="nav-link" data-scroll-target="#table-de-fait-principale"><span class="header-section-number">4.4</span> Table de fait principale</a>
  <ul class="collapse">
  <li><a href="#transactions---cœur-analytique" id="toc-transactions---cœur-analytique" class="nav-link" data-scroll-target="#transactions---cœur-analytique"><span class="header-section-number">4.4.1</span> TRANSACTIONS - Cœur analytique</a></li>
  </ul></li>
  <li><a href="#tables-de-faits-secondaires" id="toc-tables-de-faits-secondaires" class="nav-link" data-scroll-target="#tables-de-faits-secondaires"><span class="header-section-number">4.5</span> Tables de faits secondaires</a>
  <ul class="collapse">
  <li><a href="#fact_kits---détail-technique-produit" id="toc-fact_kits---détail-technique-produit" class="nav-link" data-scroll-target="#fact_kits---détail-technique-produit"><span class="header-section-number">4.5.1</span> FACT_KITS - Détail technique produit</a></li>
  <li><a href="#fact_etapes---workflow-opérationnel" id="toc-fact_etapes---workflow-opérationnel" class="nav-link" data-scroll-target="#fact_etapes---workflow-opérationnel"><span class="header-section-number">4.5.2</span> FACT_ETAPES - Workflow opérationnel</a></li>
  <li><a href="#fact_lumieres---éléments-déclairage" id="toc-fact_lumieres---éléments-déclairage" class="nav-link" data-scroll-target="#fact_lumieres---éléments-déclairage"><span class="header-section-number">4.5.3</span> FACT_LUMIERES - Éléments d’éclairage</a></li>
  </ul></li>
  <li><a href="#bénéfices-du-modèle-dimensionnel" id="toc-bénéfices-du-modèle-dimensionnel" class="nav-link" data-scroll-target="#bénéfices-du-modèle-dimensionnel"><span class="header-section-number">4.6</span> Bénéfices du modèle dimensionnel</a>
  <ul class="collapse">
  <li><a href="#performance-analytique" id="toc-performance-analytique" class="nav-link" data-scroll-target="#performance-analytique"><span class="header-section-number">4.6.1</span> Performance analytique</a></li>
  <li><a href="#facilité-dusage-business" id="toc-facilité-dusage-business" class="nav-link" data-scroll-target="#facilité-dusage-business"><span class="header-section-number">4.6.2</span> Facilité d’usage business</a></li>
  </ul></li>
  <li><a href="#métriques-et-kpis-disponibles" id="toc-métriques-et-kpis-disponibles" class="nav-link" data-scroll-target="#métriques-et-kpis-disponibles"><span class="header-section-number">4.7</span> Métriques et KPIs disponibles</a>
  <ul class="collapse">
  <li><a href="#analyses-temporelles" id="toc-analyses-temporelles" class="nav-link" data-scroll-target="#analyses-temporelles"><span class="header-section-number">4.7.1</span> Analyses temporelles</a></li>
  <li><a href="#analyses-commerciales" id="toc-analyses-commerciales" class="nav-link" data-scroll-target="#analyses-commerciales"><span class="header-section-number">4.7.2</span> Analyses commerciales</a></li>
  <li><a href="#analyses-opérationnelles" id="toc-analyses-opérationnelles" class="nav-link" data-scroll-target="#analyses-opérationnelles"><span class="header-section-number">4.7.3</span> Analyses opérationnelles</a></li>
  </ul></li>
  <li><a href="#implementation" id="toc-implementation" class="nav-link" data-scroll-target="#implementation"><span class="header-section-number">5</span> implementation</a>
  <ul class="collapse">
  <li><a href="#dimensions" id="toc-dimensions" class="nav-link" data-scroll-target="#dimensions"><span class="header-section-number">5.1</span> dimensions</a>
  <ul class="collapse">
  <li><a href="#dates" id="toc-dates" class="nav-link" data-scroll-target="#dates"><span class="header-section-number">5.1.1</span> dates</a></li>
  <li><a href="#dim-client" id="toc-dim-client" class="nav-link" data-scroll-target="#dim-client"><span class="header-section-number">5.1.2</span> dim client</a></li>
  <li><a href="#dim-representant" id="toc-dim-representant" class="nav-link" data-scroll-target="#dim-representant"><span class="header-section-number">5.1.3</span> dim representant</a></li>
  <li><a href="#dim-adresses" id="toc-dim-adresses" class="nav-link" data-scroll-target="#dim-adresses"><span class="header-section-number">5.1.4</span> dim adresses</a></li>
  <li><a href="#dim-projet" id="toc-dim-projet" class="nav-link" data-scroll-target="#dim-projet"><span class="header-section-number">5.1.5</span> dim projet</a></li>
  <li><a href="#tables-des-faits" id="toc-tables-des-faits" class="nav-link" data-scroll-target="#tables-des-faits"><span class="header-section-number">5.1.6</span> tables des faits</a></li>
  <li><a href="#kits" id="toc-kits" class="nav-link" data-scroll-target="#kits"><span class="header-section-number">5.1.7</span> kits</a></li>
  <li><a href="#etapes" id="toc-etapes" class="nav-link" data-scroll-target="#etapes"><span class="header-section-number">5.1.8</span> etapes</a></li>
  <li><a href="#lumieres" id="toc-lumieres" class="nav-link" data-scroll-target="#lumieres"><span class="header-section-number">5.1.9</span> lumieres</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#modélisation-dimensionnelle-et-data-warehouse" id="toc-modélisation-dimensionnelle-et-data-warehouse" class="nav-link" data-scroll-target="#modélisation-dimensionnelle-et-data-warehouse"><span class="header-section-number">6</span> Modélisation Dimensionnelle et Data Warehouse</a></li>
  <li><a href="#vue-densembles" id="toc-vue-densembles" class="nav-link" data-scroll-target="#vue-densembles"><span class="header-section-number">7</span> vue d’ensembles</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">8</span> Conclusion</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/datchaa/dunin_etl/blob/main/scripts/data_loading.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../scripts/data_collection.html">Phase 1 : collecte de données</a></li><li class="breadcrumb-item"><a href="../scripts/data_loading.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chargement des données</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chargement des données</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Cette phase finale du processus ETL transforme les données nettoyées en un modèle dimensionnel optimisé pour l’analyse business. L’architecture suit une approche en étoile, séparant clairement les dimensions des faits pour optimiser les performances analytiques.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/projets_clean.RData"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/commandes_clean.RData"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/contrats_clean.RData"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/kits_clean.RData"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/adresses_clean.RData"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/etapes_clean.RData"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/18195/Documents/dunin/data/cleaned/lumieres_clean.RData"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attachement du package : 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
</div>
<section id="architecture-du-data-warehouse" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="architecture-du-data-warehouse"><span class="header-section-number">4.1</span> Architecture du Data Warehouse</h2>
</section>
<section id="philosophie-de-modélisation" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="philosophie-de-modélisation"><span class="header-section-number">4.2</span> Philosophie de modélisation</h2>
<p>Le modèle adopte une <strong>architecture en étoile</strong> avec : - <strong>Table de fait centrale</strong> : <code>transactions</code> consolidant commandes et contrats - <strong>Tables de dimensions</strong> : Contexte analytique (dates, clients, projets, etc.) - <strong>Tables de faits secondaires</strong> : Détails techniques (kits, étapes, éclairage)</p>
<p>Cette approche garantit : - <strong>Performance</strong> : Requêtes analytiques optimisées - <strong>Simplicité</strong> : Structure intuitive pour les utilisateurs business - <strong>Flexibilité</strong> : Évolution facile du modèle - <strong>Gestion des clés</strong> : Remplacement des dates par des clés techniques pour optimisation des performances.</p>
</section>
<section id="tables-de-dimensions" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="tables-de-dimensions"><span class="header-section-number">4.3</span> Tables de dimensions</h2>
<section id="dim_dates---dimension-temporelle-universelle" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="dim_dates---dimension-temporelle-universelle"><span class="header-section-number">4.3.1</span> DIM_DATES - Dimension temporelle universelle</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> :</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> date_id (PK) : Clé technique au format YYYYMMDD</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="dt">date</span> : <span class="dt">Date</span> calendaire</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> annee, mois, jour : Composants temporels</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> nom_mois, nom_jour : Libellés français</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> jour_semaine : Numérotation ISO (<span class="dv">1</span><span class="op">=</span>lundi, <span class="dv">7</span><span class="op">=</span>dimanche)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Innovation technique</strong> : Construction automatisée à partir de toutes les dates présentes dans le système, garantissant la complétude du référentiel temporel.</p>
<p><strong>Usage business</strong> : Permet l’analyse temporelle (tendances, saisonnalité, comparaisons d’périodes).</p>
</section>
<section id="dim_clients---dimension-client-consolidée" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="dim_clients---dimension-client-consolidée"><span class="header-section-number">4.3.2</span> DIM_CLIENTS - Dimension client consolidée</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> :</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> client_id (PK) : Identifiant <span class="kw">unique</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> nom : Dénomination client</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">type</span> : Catégorie client (particulier, professionnel, etc.)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> transaction_id (FK) : Lien vers transactions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Consolidation</strong> : Fusion des données clients provenant des commandes et contrats pour une vue unifiée.</p>
</section>
<section id="dim_projets---contexte-projet-enrichi" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="dim_projets---contexte-projet-enrichi"><span class="header-section-number">4.3.3</span> DIM_PROJETS - Contexte projet enrichi</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> :</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> projet_id (PK) : Code projet</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> marche : Marché géographique</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> division : Division commerciale</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> contacts : Informations de contact complètes</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> indicateurs : Statuts (reprise, fusion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Valeur ajoutée</strong> : Table de référence centrale connectant tous les éléments du projet.</p>
</section>
<section id="dim_representants---force-de-vente" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="dim_representants---force-de-vente"><span class="header-section-number">4.3.4</span> DIM_REPRESENTANTS - Force de vente</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> :</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> representant_id (PK) : Identifiant <span class="kw">unique</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> nom, codeRepresentant : Identification commerciale</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> projet_id (FK) : Rattachement projet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage business</strong> : Analyse des performances commerciales par représentant.</p>
</section>
<section id="dim_adresses---géolocalisation" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="dim_adresses---géolocalisation"><span class="header-section-number">4.3.5</span> DIM_ADRESSES - Géolocalisation</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> :</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> adresse_id (PK) : Identifiant <span class="kw">unique</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ville, region, pays : Hiérarchie géographique</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="kw">usage</span> : <span class="kw">Type</span> d<span class="st">'adresse (livraison, facturation, chantier)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="st">- projet_id (FK) : Rattachement projet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage business</strong> : Analyses territoriales et logistiques.</p>
</section>
</section>
<section id="table-de-fait-principale" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="table-de-fait-principale"><span class="header-section-number">4.4</span> Table de fait principale</h2>
<section id="transactions---cœur-analytique" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="transactions---cœur-analytique"><span class="header-section-number">4.4.1</span> TRANSACTIONS - Cœur analytique</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">Structure</span> principale :</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> transaction_id (PK) : Identifiant <span class="kw">unique</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> projet_id (FK) : Lien <span class="kw">dimension</span> projet</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> date_<span class="op">*</span>_id (FK) : Liens multiples vers <span class="kw">dimension</span> dates</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Métriques financières : total, totalHT, etc.</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Métriques opérationnelles : quantités, statuts,etc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Innovation de modélisation</strong> : - <strong>Fusion intelligente</strong> : Commandes et contrats dans une même structure - <strong>Références temporelles multiples</strong> : Création, validité, expédition - <strong>Métriques business</strong> : KPIs directement exploitables</p>
<p><strong>Avantages analytiques</strong> : - Vue consolidée des transactions - Analyses comparatives commandes vs contrats - Suivi temporel multi-dimensionnel</p>
</section>
</section>
<section id="tables-de-faits-secondaires" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="tables-de-faits-secondaires"><span class="header-section-number">4.5</span> Tables de faits secondaires</h2>
<section id="fact_kits---détail-technique-produit" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="fact_kits---détail-technique-produit"><span class="header-section-number">4.5.1</span> FACT_KITS - Détail technique produit</h3>
<p><strong>Granularité</strong> : Un enregistrement par kit/composant <strong>Métriques</strong> : Sous-totaux, spécifications techniques <strong>Usage</strong> : Analyse détaillée des configurations produit</p>
</section>
<section id="fact_etapes---workflow-opérationnel" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="fact_etapes---workflow-opérationnel"><span class="header-section-number">4.5.2</span> FACT_ETAPES - Workflow opérationnel</h3>
<p><strong>Granularité</strong> : Un enregistrement par étape de processus <strong>Métriques</strong> : Temps de traitement, statuts d’avancement <strong>Usage</strong> : Optimisation des processus, suivi de production</p>
</section>
<section id="fact_lumieres---éléments-déclairage" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="fact_lumieres---éléments-déclairage"><span class="header-section-number">4.5.3</span> FACT_LUMIERES - Éléments d’éclairage</h3>
<p><strong>Granularité</strong> : Un enregistrement par modèle d’éclairage <strong>Métriques</strong> : Quantités par modèle <strong>Usage</strong> : Gestion des catalogues, analyse des préférences</p>
</section>
</section>
<section id="bénéfices-du-modèle-dimensionnel" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="bénéfices-du-modèle-dimensionnel"><span class="header-section-number">4.6</span> Bénéfices du modèle dimensionnel</h2>
<section id="performance-analytique" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="performance-analytique"><span class="header-section-number">4.6.1</span> Performance analytique</h3>
<ul>
<li><strong>Requêtes optimisées</strong> : Structure dénormalisée adaptée à l’OLAP</li>
<li><strong>Indexes implicites</strong> : Clés dimensionnelles facilitent l’indexation</li>
<li><strong>Jointures simples</strong> : Architecture en étoile = jointures 1-N uniquement</li>
</ul>
</section>
<section id="facilité-dusage-business" class="level3" data-number="4.6.2">
<h3 data-number="4.6.2" class="anchored" data-anchor-id="facilité-dusage-business"><span class="header-section-number">4.6.2</span> Facilité d’usage business</h3>
<ul>
<li><strong>Évolutivité</strong> : Ajout de dimensions sans impact sur l’existant</li>
</ul>
</section>
</section>
<section id="métriques-et-kpis-disponibles" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="métriques-et-kpis-disponibles"><span class="header-section-number">4.7</span> Métriques et KPIs disponibles</h2>
<section id="analyses-temporelles" class="level3" data-number="4.7.1">
<h3 data-number="4.7.1" class="anchored" data-anchor-id="analyses-temporelles"><span class="header-section-number">4.7.1</span> Analyses temporelles</h3>
<ul>
<li>Évolution CA par période (jour/mois/année)</li>
<li>Saisonnalité des commandes</li>
<li>Délais moyens par type de transaction etc</li>
</ul>
</section>
<section id="analyses-commerciales" class="level3" data-number="4.7.2">
<h3 data-number="4.7.2" class="anchored" data-anchor-id="analyses-commerciales"><span class="header-section-number">4.7.2</span> Analyses commerciales</h3>
<ul>
<li>Performance par représentant</li>
<li>Répartition géographique du CA</li>
<li>Segmentation client (récence, fréquence, montant) etc</li>
</ul>
</section>
<section id="analyses-opérationnelles" class="level3" data-number="4.7.3">
<h3 data-number="4.7.3" class="anchored" data-anchor-id="analyses-opérationnelles"><span class="header-section-number">4.7.3</span> Analyses opérationnelles</h3>
<ul>
<li>Temps de traitement par étape</li>
<li>Taux de transformation commande→contrat</li>
<li>Analyse des configurations techniques (kits) etc</li>
</ul>
</section>
</section>
<section id="implementation" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> implementation</h1>
<section id="dimensions" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="dimensions"><span class="header-section-number">5.1</span> dimensions</h2>
<section id="dates" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="dates"><span class="header-section-number">5.1.1</span> dates</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(commandes_clean,contrats_clean)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Étape 1 : Extraire toutes les colonnes contenant "date" et les fusionner proprement</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>all_dates_df <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  commandes_clean,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  contrats_clean,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  kits_clean,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  adresses_clean,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  etapes_clean,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  projets_clean,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  lumieres_clean</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">select</span>(.x, <span class="fu">contains</span>(<span class="st">"date"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>, <span class="at">names_to =</span> <span class="st">"type_date"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(value) <span class="sc">|&gt;</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lubridate<span class="sc">::</span><span class="fu">is.Date</span>(value) <span class="sc">|</span> lubridate<span class="sc">::</span><span class="fu">is.POSIXt</span>(value))  <span class="co"># On garde </span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Étape 2 : Créer la table dim_date</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>dim_dates <span class="ot">&lt;-</span> all_dates_df <span class="sc">|&gt;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_id     =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(value, <span class="st">"%Y%m%d"</span>)),</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">date         =</span> <span class="fu">as.Date</span>(value),</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">annee        =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(value, <span class="st">"%Y"</span>)),</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">mois         =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(value, <span class="st">"%m"</span>)),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">nom_mois     =</span> <span class="fu">format</span>(value, <span class="st">"%B"</span>),</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">jour         =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(value, <span class="st">"%d"</span>)),</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">jour_semaine =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(value, <span class="st">"%u"</span>)),</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">nom_jour     =</span> <span class="fu">format</span>(value, <span class="st">"%A"</span>)</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dim-client" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="dim-client"><span class="header-section-number">5.1.2</span> dim client</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dim_clients <span class="ot">&lt;-</span> transactions <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(commandes_clean) <span class="sc">|&gt;</span> <span class="fu">transmute</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">client_id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nom =</span> nomClient,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> typeClient,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">transaction_id =</span> code</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dim-representant" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="dim-representant"><span class="header-section-number">5.1.3</span> dim representant</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dim_representants <span class="ot">&lt;-</span> projets_clean <span class="sc">|&gt;</span> <span class="fu">transmute</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">representant_id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nom =</span> nomRepresentant,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">codeRepresentant =</span> codeRepresentant,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">projet_id =</span> code</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dim-adresses" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="dim-adresses"><span class="header-section-number">5.1.4</span> dim adresses</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dim_adresses  <span class="ot">&lt;-</span> adresses_clean <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">adresse_id =</span> <span class="fu">row_number</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dim-projet" class="level3" data-number="5.1.5">
<h3 data-number="5.1.5" class="anchored" data-anchor-id="dim-projet"><span class="header-section-number">5.1.5</span> dim projet</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dim_projets <span class="ot">&lt;-</span> projets_clean <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>))) <span class="sc">%&gt;%</span>   <span class="co"># exclure les colonnes Date</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">contains</span>(<span class="fu">c</span>(<span class="st">"client"</span>, <span class="st">"Representant"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">projet_id =</span> code)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># exclure les colonnes qui </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tables-des-faits" class="level3" data-number="5.1.6">
<h3 data-number="5.1.6" class="anchored" data-anchor-id="tables-des-faits"><span class="header-section-number">5.1.6</span> tables des faits</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(commandes_clean,contrats_clean)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Associer chaque date de transactions à un date_id</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> transactions <span class="sc">|&gt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dim_dates <span class="sc">|&gt;</span> <span class="fu">select</span>(date_id, date), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"dateCreation"</span> <span class="ot">=</span> <span class="st">"date"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date_creation_id =</span> date_id) <span class="sc">|&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dim_dates <span class="sc">|&gt;</span> <span class="fu">select</span>(date_id, date), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"dateValidite"</span> <span class="ot">=</span> <span class="st">"date"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date_validite_id =</span> date_id) <span class="sc">|&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dim_dates <span class="sc">|&gt;</span> <span class="fu">select</span>(date_id, date), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"datePrevExped"</span> <span class="ot">=</span> <span class="st">"date"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date_prev_exped_id =</span> date_id)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> transactions <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>transactions <span class="ot">&lt;-</span> transactions <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">projet_id =</span> projet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="kits" class="level3" data-number="5.1.7">
<h3 data-number="5.1.7" class="anchored" data-anchor-id="kits"><span class="header-section-number">5.1.7</span> kits</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>fact_kits <span class="ot">&lt;-</span>kits_clean <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="etapes" class="level3" data-number="5.1.8">
<h3 data-number="5.1.8" class="anchored" data-anchor-id="etapes"><span class="header-section-number">5.1.8</span> etapes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fact_etapes <span class="ot">&lt;-</span>etapes_clean <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lumieres" class="level3" data-number="5.1.9">
<h3 data-number="5.1.9" class="anchored" data-anchor-id="lumieres"><span class="header-section-number">5.1.9</span> lumieres</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fact_lumieres <span class="ot">&lt;-</span>lumieres_clean <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">inherits</span>(.x, <span class="st">"Date"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="modélisation-dimensionnelle-et-data-warehouse" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Modélisation Dimensionnelle et Data Warehouse</h1>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram

    %% =========================
    %% DIMENSIONS
    %% =========================

    dim_dates {
        INT date_id PK
        DATE date
        INT annee
        INT mois
        STRING nom_mois
        INT jour
        INT jour_semaine
        STRING nom_jour
    }

    dim_clients {
        INT client_id PK
        STRING nom
        STRING type
        INT transaction_id FK
    }

    dim_projets {
        INT projet_id PK
        STRING marche
        STRING division
        STRING courrielContact
        STRING nomContact
        STRING telephoneContact
        BOOLEAN estReprise
        BOOLEAN enFusion
    }

    dim_representants {
        INT representant_id PK
        STRING nom
        STRING codeRepresentant
        INT projet_id FK
    }

    dim_adresses {
        INT adresse_id PK
        STRING ville
        STRING region
        STRING pays
        STRING usage
        INT projet_id FK
    }

    %% =========================
    %% TABLE DE FAIT PRINCIPALE
    %% =========================

    transactions {
        INT transaction_id PK
        INT projet_id FK
        INT date_creation_id FK
        INT date_validite_id FK
        INT date_prev_exped_id FK
        FLOAT total
        FLOAT totalHT
        INT qteItems
        STRING statutCred
    }

    %% =========================
    %% TABLES DE FAIT DÉTAILLÉES
    %% =========================

    fact_kits {
        STRING code
        STRING nom
        INT commande_id
        INT contrat_id
        FLOAT sousTotal
        STRING typeKit
    }

    fact_etapes {
        INT etape_id PK
        STRING createur
        STRING emplacement
        STRING statut
        DATETIME tempsCreation
        INT commande_id
        INT contrat_id
    }

    fact_lumieres {
        STRING modele
        INT qte
        INT contrat_id
    }

    %% =========================
    %% RELATIONS
    %% =========================

    transactions ||--o{ dim_dates : date_creation_id
    transactions ||--o{ dim_dates : date_validite_id
    transactions ||--o{ dim_dates : date_prev_exped_id
    transactions ||--o{ dim_projets : projet_id
    dim_projets ||--o{ dim_clients : projet_id
    dim_projets ||--o{ dim_representants : projet_id
    dim_projets ||--o{ dim_adresses : projet_id

    fact_kits ||--o{ transactions : commande_id
    fact_kits ||--o{ transactions : contrat_id

    fact_etapes ||--o{ transactions : commande_id
    fact_etapes ||--o{ transactions : contrat_id

    fact_lumieres ||--o{ transactions : contrat_id
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- SCRIPT DE CR�ATION DU DATA WAREHOUSE DUNIN_DWH</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">--</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Cr�ation de la base de donn�es</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> (<span class="kw">SELECT</span> name <span class="kw">FROM</span> sys.databases <span class="kw">WHERE</span> name <span class="op">=</span> <span class="st">'DUNIN_DWH'</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="cf">BEGIN</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CREATE</span> <span class="kw">DATABASE</span> DUNIN_DWH;</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    PRINT <span class="st">'Base de donn�es DUNIN_DWH cr��e avec succ�s.'</span>;</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="cf">ELSE</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="cf">BEGIN</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    PRINT <span class="st">'Base de donn�es DUNIN_DWH existe d�j�.'</span>;</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>GO</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> DUNIN_DWH;</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>GO</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="co">-- SUPPRESSION DES TABLES EXISTANTES (pour r�initialisation compl�te)</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">-- Suppression des tables de faits (d�pendantes)</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.fact_etapes'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.fact_etapes;</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.fact_lumieres'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.fact_lumieres;</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.fact_kits'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.fact_kits;</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.transactions'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.transactions;</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co">-- Suppression des tables de dimensions</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.dim_clients'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.dim_clients;</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.dim_representants'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.dim_representants;</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.dim_adresses'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.dim_adresses;</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.dim_projets'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.dim_projets;</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="cf">IF</span> OBJECT_ID(<span class="st">'dbo.dim_dates'</span>, <span class="st">'U'</span>) <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DROP</span> <span class="kw">TABLE</span> dbo.dim_dates;</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>PRINT <span class="st">'Tables existantes supprim�es.'</span>;</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>GO</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="co">-- CR�ATION DES TABLES DE DIMENSIONS</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a><span class="co">-- DIMENSION DATES</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.dim_dates (</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    date_id         <span class="dt">INT</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">date</span>            <span class="dt">DATE</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>    annee           <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    mois            <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>    nom_mois        <span class="dt">NVARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>    jour            <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    jour_semaine    <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>    nom_jour        <span class="dt">NVARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a><span class="co">-- DIMENSION CLIENTS</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.dim_clients (</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>    client_id       <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>    nom             <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">type</span>            <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>    transaction_id  <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>PRINT <span class="st">'Table dim_clients cr��e.'</span>;</span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a><span class="co">-- DIMENSION PROJETS</span></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.dim_projets (</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>    projet_id           <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>    marche              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>    division            <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>    courrielContact     <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>    nomContact          <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>    telephoneContact    <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>    coordsCommTxt       <span class="dt">NVARCHAR</span>(<span class="dv">500</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>    coordsExpedTxt      <span class="dt">NVARCHAR</span>(<span class="dv">500</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>    coordsFactTxt       <span class="dt">NVARCHAR</span>(<span class="dv">500</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>    estReprise          BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a>    enFusion            BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>    createurNom         <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>    createurCourriel    <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a><span class="co">-- DIMENSION REPRESENTANTS</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.dim_representants (</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>    representant_id     <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>    nom                 <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>    codeRepresentant    <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>    projet_id           <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Cl� �trang�re</span></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_dim_representants_projet </span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (projet_id) <span class="kw">REFERENCES</span> dbo.dim_projets(projet_id)</span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>PRINT <span class="st">'Table dim_representants cr��e.'</span>;</span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a><span class="co">-- DIMENSION ADRESSES</span></span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.dim_adresses (</span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a>    adresse_id      <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a>    codePost        <span class="dt">NVARCHAR</span>(<span class="dv">20</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>    etatProv        <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a>    ligne1          <span class="dt">NVARCHAR</span>(<span class="dv">500</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>    ligne2          <span class="dt">NVARCHAR</span>(<span class="dv">500</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a>    pays            <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>    region          <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a>    ville           <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a>    <span class="kw">usage</span>           <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a>    code            <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>    sorte           <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a>    projet_id       <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a>    nom             <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a>    contact         <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Cl� �trang�re</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_dim_adresses_projet </span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (projet_id) <span class="kw">REFERENCES</span> dbo.dim_projets(projet_id)</span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a><span class="co">-- CR�ATION DE LA TABLE DE FAIT PRINCIPALE</span></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a><span class="co">-- TRANSACTIONS (Fait principal)</span></span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.transactions (</span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a>    transaction_id          <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Cl�s �trang�res vers dimensions</span></span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a>    projet_id               <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a>    date_creation_id        <span class="dt">INT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a>    date_validite_id        <span class="dt">INT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a>    date_prev_exped_id      <span class="dt">INT</span> <span class="kw">NULL</span>,</span>
<span id="cb20-147"><a href="#cb20-147" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-148"><a href="#cb20-148" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Informations client (d�normalis� pour performance)</span></span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a>    nomClient               <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a>    codeClient2             <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a>    typeClient              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- M�triques temporelles</span></span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a>    delaiPrevExped          <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a>    nbJourValide            <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Statuts et indicateurs</span></span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a>    statutCred              BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a>    validCred               BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a>    estImport               BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a>    estReprise              BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a>    estCQ                   BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-163"><a href="#cb20-163" aria-hidden="true" tabindex="-1"></a>    avecLivraison           BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-164"><a href="#cb20-164" aria-hidden="true" tabindex="-1"></a>    installation            BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a>    psd                     BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- M�triques financi�res principales</span></span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a>    total                   <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a>    totalHT                 <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a>    sousTotal               <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a>    sousTotal2              <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-173"><a href="#cb20-173" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- M�triques de services</span></span>
<span id="cb20-174"><a href="#cb20-174" aria-hidden="true" tabindex="-1"></a>    totalLivraison          <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a>    totalInstall            <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a>    totalCEM                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- M�triques de quantit�</span></span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a>    qteItems                <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a>    qteItemsCab             <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a>    promotions              <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Informations cr�ation</span></span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a>    createurNom             <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a>    createurCourriel        <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a>    division                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Taxes et ajustements</span></span>
<span id="cb20-189"><a href="#cb20-189" aria-hidden="true" tabindex="-1"></a>    totalTx1                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-190"><a href="#cb20-190" aria-hidden="true" tabindex="-1"></a>    totalTx2                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a>    ecartPrix               <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a>    solde                   <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Sp�cificit�s contrats (comptoirs)</span></span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a>    totalComptoirBois       <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a>    totalComptoirGranite    <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a>    totalComptoirQuartz     <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a>    totalComptoirStratifie  <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-199"><a href="#cb20-199" aria-hidden="true" tabindex="-1"></a>    totalEsc                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-200"><a href="#cb20-200" aria-hidden="true" tabindex="-1"></a>    montantEcartPrix        <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Frais sp�cialis�s</span></span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a>    fraisPSD                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a>    fraisPDM                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a>    fraisSAV                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a>    TotalEscompte           <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Codes postaux</span></span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a>    codePost                <span class="dt">NVARCHAR</span>(<span class="dv">20</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a>    codePostFinal           <span class="dt">NVARCHAR</span>(<span class="dv">20</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-213"><a href="#cb20-213" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb20-214"><a href="#cb20-214" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Cl�s �trang�res</span></span>
<span id="cb20-215"><a href="#cb20-215" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_transactions_projet </span>
<span id="cb20-216"><a href="#cb20-216" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (projet_id) <span class="kw">REFERENCES</span> dbo.dim_projets(projet_id),</span>
<span id="cb20-217"><a href="#cb20-217" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_transactions_date_creation </span>
<span id="cb20-218"><a href="#cb20-218" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (date_creation_id) <span class="kw">REFERENCES</span> dbo.dim_dates(date_id),</span>
<span id="cb20-219"><a href="#cb20-219" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_transactions_date_validite </span>
<span id="cb20-220"><a href="#cb20-220" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (date_validite_id) <span class="kw">REFERENCES</span> dbo.dim_dates(date_id),</span>
<span id="cb20-221"><a href="#cb20-221" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CONSTRAINT</span> FK_transactions_date_exped </span>
<span id="cb20-222"><a href="#cb20-222" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (date_prev_exped_id) <span class="kw">REFERENCES</span> dbo.dim_dates(date_id)</span>
<span id="cb20-223"><a href="#cb20-223" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-224"><a href="#cb20-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-225"><a href="#cb20-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-226"><a href="#cb20-226" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-227"><a href="#cb20-227" aria-hidden="true" tabindex="-1"></a><span class="co">-- CR�ATION DES TABLES DE FAITS SECONDAIRES</span></span>
<span id="cb20-228"><a href="#cb20-228" aria-hidden="true" tabindex="-1"></a><span class="co">-- ============================================================================</span></span>
<span id="cb20-229"><a href="#cb20-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-230"><a href="#cb20-230" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-231"><a href="#cb20-231" aria-hidden="true" tabindex="-1"></a><span class="co">-- FACT_ETAPES</span></span>
<span id="cb20-232"><a href="#cb20-232" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-233"><a href="#cb20-233" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.fact_etapes (</span>
<span id="cb20-234"><a href="#cb20-234" aria-hidden="true" tabindex="-1"></a>    etape_id        <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-235"><a href="#cb20-235" aria-hidden="true" tabindex="-1"></a>    createur        <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-236"><a href="#cb20-236" aria-hidden="true" tabindex="-1"></a>    emplacement     <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-237"><a href="#cb20-237" aria-hidden="true" tabindex="-1"></a>    statut          <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-238"><a href="#cb20-238" aria-hidden="true" tabindex="-1"></a>    tempsCreation   <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-239"><a href="#cb20-239" aria-hidden="true" tabindex="-1"></a>    commande_id     <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-240"><a href="#cb20-240" aria-hidden="true" tabindex="-1"></a>    contrat_id      <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-241"><a href="#cb20-241" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-242"><a href="#cb20-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-243"><a href="#cb20-243" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-244"><a href="#cb20-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-245"><a href="#cb20-245" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-246"><a href="#cb20-246" aria-hidden="true" tabindex="-1"></a><span class="co">-- FACT_LUMIERES</span></span>
<span id="cb20-247"><a href="#cb20-247" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-248"><a href="#cb20-248" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.fact_lumieres (</span>
<span id="cb20-249"><a href="#cb20-249" aria-hidden="true" tabindex="-1"></a>    lumiere_id      <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-250"><a href="#cb20-250" aria-hidden="true" tabindex="-1"></a>    modele          <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-251"><a href="#cb20-251" aria-hidden="true" tabindex="-1"></a>    qte             <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-252"><a href="#cb20-252" aria-hidden="true" tabindex="-1"></a>    contrat_id      <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-253"><a href="#cb20-253" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-254"><a href="#cb20-254" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-255"><a href="#cb20-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-256"><a href="#cb20-256" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-257"><a href="#cb20-257" aria-hidden="true" tabindex="-1"></a><span class="co">-- FACT_KITS (Table la plus complexe)</span></span>
<span id="cb20-258"><a href="#cb20-258" aria-hidden="true" tabindex="-1"></a><span class="co">-- -----------------------------</span></span>
<span id="cb20-259"><a href="#cb20-259" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dbo.fact_kits (</span>
<span id="cb20-260"><a href="#cb20-260" aria-hidden="true" tabindex="-1"></a>    kit_id                      <span class="dt">INT</span> IDENTITY(<span class="dv">1</span>,<span class="dv">1</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb20-261"><a href="#cb20-261" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-262"><a href="#cb20-262" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Identification</span></span>
<span id="cb20-263"><a href="#cb20-263" aria-hidden="true" tabindex="-1"></a>    code                        <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-264"><a href="#cb20-264" aria-hidden="true" tabindex="-1"></a>    nom                         <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-265"><a href="#cb20-265" aria-hidden="true" tabindex="-1"></a>    typeKit                     <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-266"><a href="#cb20-266" aria-hidden="true" tabindex="-1"></a>    unit                        <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-267"><a href="#cb20-267" aria-hidden="true" tabindex="-1"></a>    ligne                       <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-268"><a href="#cb20-268" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-269"><a href="#cb20-269" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Liens transactionnels</span></span>
<span id="cb20-270"><a href="#cb20-270" aria-hidden="true" tabindex="-1"></a>    commande_id                 <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-271"><a href="#cb20-271" aria-hidden="true" tabindex="-1"></a>    contrat_id                  <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-272"><a href="#cb20-272" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-273"><a href="#cb20-273" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Quantit�s</span></span>
<span id="cb20-274"><a href="#cb20-274" aria-hidden="true" tabindex="-1"></a>    qte                         <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-275"><a href="#cb20-275" aria-hidden="true" tabindex="-1"></a>    qteTr                       <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-276"><a href="#cb20-276" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-277"><a href="#cb20-277" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- M�triques financi�res</span></span>
<span id="cb20-278"><a href="#cb20-278" aria-hidden="true" tabindex="-1"></a>    sousTotalKit                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-279"><a href="#cb20-279" aria-hidden="true" tabindex="-1"></a>    sousTotalKitEff             <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-280"><a href="#cb20-280" aria-hidden="true" tabindex="-1"></a>    sousTotal                   <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-281"><a href="#cb20-281" aria-hidden="true" tabindex="-1"></a>    sousTotalEff                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-282"><a href="#cb20-282" aria-hidden="true" tabindex="-1"></a>    sousTotalCab                <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-283"><a href="#cb20-283" aria-hidden="true" tabindex="-1"></a>    sousTotalPanel              <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-284"><a href="#cb20-284" aria-hidden="true" tabindex="-1"></a>    sousTotalMoulure            <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-285"><a href="#cb20-285" aria-hidden="true" tabindex="-1"></a>    sousTotalAutre              <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-286"><a href="#cb20-286" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-287"><a href="#cb20-287" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Comptoirs</span></span>
<span id="cb20-288"><a href="#cb20-288" aria-hidden="true" tabindex="-1"></a>    totalComptoir               <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-289"><a href="#cb20-289" aria-hidden="true" tabindex="-1"></a>    totalComptoirEff            <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-290"><a href="#cb20-290" aria-hidden="true" tabindex="-1"></a>    nbComptoir                  <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-291"><a href="#cb20-291" aria-hidden="true" tabindex="-1"></a>    longComptoir                <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-292"><a href="#cb20-292" aria-hidden="true" tabindex="-1"></a>    surfaceComptoir             <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-293"><a href="#cb20-293" aria-hidden="true" tabindex="-1"></a>    cumulComptoir               <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-294"><a href="#cb20-294" aria-hidden="true" tabindex="-1"></a>    extraComptoir               <span class="dt">DECIMAL</span>(<span class="dv">15</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-295"><a href="#cb20-295" aria-hidden="true" tabindex="-1"></a>    comptoirMod                 <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-296"><a href="#cb20-296" aria-hidden="true" tabindex="-1"></a>    comptoirCouleur             <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-297"><a href="#cb20-297" aria-hidden="true" tabindex="-1"></a>    comptoirGpCouleur           <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-298"><a href="#cb20-298" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-299"><a href="#cb20-299" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Caract�ristiques produit</span></span>
<span id="cb20-300"><a href="#cb20-300" aria-hidden="true" tabindex="-1"></a>    assemblage                  <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-301"><a href="#cb20-301" aria-hidden="true" tabindex="-1"></a>    gamme                       <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-302"><a href="#cb20-302" aria-hidden="true" tabindex="-1"></a>    serie                       <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-303"><a href="#cb20-303" aria-hidden="true" tabindex="-1"></a>    finishColor                 <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-304"><a href="#cb20-304" aria-hidden="true" tabindex="-1"></a>    specie                      <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-305"><a href="#cb20-305" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-306"><a href="#cb20-306" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Bordures et finitions</span></span>
<span id="cb20-307"><a href="#cb20-307" aria-hidden="true" tabindex="-1"></a>    edgeColle                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-308"><a href="#cb20-308" aria-hidden="true" tabindex="-1"></a>    edgeBanding                 <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-309"><a href="#cb20-309" aria-hidden="true" tabindex="-1"></a>    bd_edgeBanding              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-310"><a href="#cb20-310" aria-hidden="true" tabindex="-1"></a>    df_edgeBanding              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-311"><a href="#cb20-311" aria-hidden="true" tabindex="-1"></a>    wd_edgeBanding              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-312"><a href="#cb20-312" aria-hidden="true" tabindex="-1"></a>    edgePorte                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-313"><a href="#cb20-313" aria-hidden="true" tabindex="-1"></a>    edgeTablette                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-314"><a href="#cb20-314" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-315"><a href="#cb20-315" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Poign�es</span></span>
<span id="cb20-316"><a href="#cb20-316" aria-hidden="true" tabindex="-1"></a>    handle                      <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-317"><a href="#cb20-317" aria-hidden="true" tabindex="-1"></a>    handleOri                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-318"><a href="#cb20-318" aria-hidden="true" tabindex="-1"></a>    bd_handle                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-319"><a href="#cb20-319" aria-hidden="true" tabindex="-1"></a>    bd_handleOri                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-320"><a href="#cb20-320" aria-hidden="true" tabindex="-1"></a>    df_handle                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-321"><a href="#cb20-321" aria-hidden="true" tabindex="-1"></a>    df_handleOri                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-322"><a href="#cb20-322" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-323"><a href="#cb20-323" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Configuration armoires</span></span>
<span id="cb20-324"><a href="#cb20-324" aria-hidden="true" tabindex="-1"></a>    cabDesign                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-325"><a href="#cb20-325" aria-hidden="true" tabindex="-1"></a>    cabConstruct                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-326"><a href="#cb20-326" aria-hidden="true" tabindex="-1"></a>    cabHinge                    <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-327"><a href="#cb20-327" aria-hidden="true" tabindex="-1"></a>    cabWallProf                 <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-328"><a href="#cb20-328" aria-hidden="true" tabindex="-1"></a>    t_cabWallProf               <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-329"><a href="#cb20-329" aria-hidden="true" tabindex="-1"></a>    cabHautComptoir             <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-330"><a href="#cb20-330" aria-hidden="true" tabindex="-1"></a>    t_cabHautComptoir           <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-331"><a href="#cb20-331" aria-hidden="true" tabindex="-1"></a>    cabDegagementWall           <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-332"><a href="#cb20-332" aria-hidden="true" tabindex="-1"></a>    t_cabDegagementWall         <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-333"><a href="#cb20-333" aria-hidden="true" tabindex="-1"></a>    cabToeKickHeight            <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-334"><a href="#cb20-334" aria-hidden="true" tabindex="-1"></a>    t_cabToeKickHeight          <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-335"><a href="#cb20-335" aria-hidden="true" tabindex="-1"></a>    cabToeKickProf              <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-336"><a href="#cb20-336" aria-hidden="true" tabindex="-1"></a>    t_cabToeKickProf            <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-337"><a href="#cb20-337" aria-hidden="true" tabindex="-1"></a>    cabToeKickType              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-338"><a href="#cb20-338" aria-hidden="true" tabindex="-1"></a>    cabAlignBase                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-339"><a href="#cb20-339" aria-hidden="true" tabindex="-1"></a>    t_cabAlignBase              <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-340"><a href="#cb20-340" aria-hidden="true" tabindex="-1"></a>    cabTallHeightAlign          <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-341"><a href="#cb20-341" aria-hidden="true" tabindex="-1"></a>    t_cabTallHeightAlign        <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-342"><a href="#cb20-342" aria-hidden="true" tabindex="-1"></a>    cabTypeComptoir             <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-343"><a href="#cb20-343" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-344"><a href="#cb20-344" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- �l�ments techniques</span></span>
<span id="cb20-345"><a href="#cb20-345" aria-hidden="true" tabindex="-1"></a>    tabletteType                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-346"><a href="#cb20-346" aria-hidden="true" tabindex="-1"></a>    drawerConst                 <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-347"><a href="#cb20-347" aria-hidden="true" tabindex="-1"></a>    drawerSlide                 <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-348"><a href="#cb20-348" aria-hidden="true" tabindex="-1"></a>    matPatte                    <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-349"><a href="#cb20-349" aria-hidden="true" tabindex="-1"></a>    patteAchetee                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-350"><a href="#cb20-350" aria-hidden="true" tabindex="-1"></a>    equerre                     <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-351"><a href="#cb20-351" aria-hidden="true" tabindex="-1"></a>    cacheNeon                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-352"><a href="#cb20-352" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-353"><a href="#cb20-353" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Poutres</span></span>
<span id="cb20-354"><a href="#cb20-354" aria-hidden="true" tabindex="-1"></a>    beamModele                  <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-355"><a href="#cb20-355" aria-hidden="true" tabindex="-1"></a>    beamHeight                  <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-356"><a href="#cb20-356" aria-hidden="true" tabindex="-1"></a>    t_beamHeight                <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-357"><a href="#cb20-357" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-358"><a href="#cb20-358" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Indicateurs</span></span>
<span id="cb20-359"><a href="#cb20-359" aria-hidden="true" tabindex="-1"></a>    estBloqPrix                 BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-360"><a href="#cb20-360" aria-hidden="true" tabindex="-1"></a>    estPrixAdmin                BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-361"><a href="#cb20-361" aria-hidden="true" tabindex="-1"></a>    estExtra                    BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-362"><a href="#cb20-362" aria-hidden="true" tabindex="-1"></a>    enErreur                    BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-363"><a href="#cb20-363" aria-hidden="true" tabindex="-1"></a>    psd                         BIT <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb20-364"><a href="#cb20-364" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-365"><a href="#cb20-365" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Signatures et utilisation</span></span>
<span id="cb20-366"><a href="#cb20-366" aria-hidden="true" tabindex="-1"></a>    signature                   <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-367"><a href="#cb20-367" aria-hidden="true" tabindex="-1"></a>    kitUtilisation              <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-368"><a href="#cb20-368" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-369"><a href="#cb20-369" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Sp�cifications mat�riaux d�taill�es</span></span>
<span id="cb20-370"><a href="#cb20-370" aria-hidden="true" tabindex="-1"></a>    bd_specie                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-371"><a href="#cb20-371" aria-hidden="true" tabindex="-1"></a>    df_specie                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-372"><a href="#cb20-372" aria-hidden="true" tabindex="-1"></a>    bd_serie                    <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-373"><a href="#cb20-373" aria-hidden="true" tabindex="-1"></a>    df_serie                    <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-374"><a href="#cb20-374" aria-hidden="true" tabindex="-1"></a>    bd_finishColor              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-375"><a href="#cb20-375" aria-hidden="true" tabindex="-1"></a>    df_finishColor              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-376"><a href="#cb20-376" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-377"><a href="#cb20-377" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Mod�les de portes</span></span>
<span id="cb20-378"><a href="#cb20-378" aria-hidden="true" tabindex="-1"></a>    porteModeleB                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-379"><a href="#cb20-379" aria-hidden="true" tabindex="-1"></a>    porteModeleH                <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-380"><a href="#cb20-380" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeB          <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-381"><a href="#cb20-381" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeH          <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-382"><a href="#cb20-382" aria-hidden="true" tabindex="-1"></a>    porteModeleBSensGrain       <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-383"><a href="#cb20-383" aria-hidden="true" tabindex="-1"></a>    porteModeleHSensGrain       <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-384"><a href="#cb20-384" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeBSensGrain <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-385"><a href="#cb20-385" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeHSensGrain <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-386"><a href="#cb20-386" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-387"><a href="#cb20-387" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- �paisseurs portes</span></span>
<span id="cb20-388"><a href="#cb20-388" aria-hidden="true" tabindex="-1"></a>    porteModeleB_epais          <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-389"><a href="#cb20-389" aria-hidden="true" tabindex="-1"></a>    t_porteModeleB_epais        <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-390"><a href="#cb20-390" aria-hidden="true" tabindex="-1"></a>    porteModeleH_epais          <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-391"><a href="#cb20-391" aria-hidden="true" tabindex="-1"></a>    t_porteModeleH_epais        <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-392"><a href="#cb20-392" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeB_epais    <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-393"><a href="#cb20-393" aria-hidden="true" tabindex="-1"></a>    t_porteModeleFacadeB_epais  <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-394"><a href="#cb20-394" aria-hidden="true" tabindex="-1"></a>    porteModeleFacadeH_epais    <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-395"><a href="#cb20-395" aria-hidden="true" tabindex="-1"></a>    t_porteModeleFacadeH_epais  <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-396"><a href="#cb20-396" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-397"><a href="#cb20-397" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Moulures</span></span>
<span id="cb20-398"><a href="#cb20-398" aria-hidden="true" tabindex="-1"></a>    moulLumModele               <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-399"><a href="#cb20-399" aria-hidden="true" tabindex="-1"></a>    moulLumHeight               <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-400"><a href="#cb20-400" aria-hidden="true" tabindex="-1"></a>    t_moulLumHeight             <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-401"><a href="#cb20-401" aria-hidden="true" tabindex="-1"></a>    moulPiedModele              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-402"><a href="#cb20-402" aria-hidden="true" tabindex="-1"></a>    moulPiedHeight              <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-403"><a href="#cb20-403" aria-hidden="true" tabindex="-1"></a>    t_moulPiedHeight            <span class="dt">NVARCHAR</span>(<span class="dv">50</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-404"><a href="#cb20-404" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-405"><a href="#cb20-405" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- D�tails techniques</span></span>
<span id="cb20-406"><a href="#cb20-406" aria-hidden="true" tabindex="-1"></a>    detailSection               <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-407"><a href="#cb20-407" aria-hidden="true" tabindex="-1"></a>    aBomCustom                  <span class="dt">NVARCHAR</span>(<span class="dv">255</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-408"><a href="#cb20-408" aria-hidden="true" tabindex="-1"></a>    couleurEstBois              <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-409"><a href="#cb20-409" aria-hidden="true" tabindex="-1"></a>    items                       NTEXT <span class="kw">NULL</span>,</span>
<span id="cb20-410"><a href="#cb20-410" aria-hidden="true" tabindex="-1"></a>    typeColor                   <span class="dt">NVARCHAR</span>(<span class="dv">100</span>) <span class="kw">NULL</span>,</span>
<span id="cb20-411"><a href="#cb20-411" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-412"><a href="#cb20-412" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb20-413"><a href="#cb20-413" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-414"><a href="#cb20-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-415"><a href="#cb20-415" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-416"><a href="#cb20-416" aria-hidden="true" tabindex="-1"></a>GO</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vue-densembles" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> vue d’ensembles</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fact_etapes <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,888 × 6
   createur              emplacement statut tempsCreation commande_id contrat_id
   &lt;chr&gt;                 &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     
 1 dunintech             Manufactur… Saisie             0 C-000001    ""        
 2 glebel                Manufactur… Saisie             0 C-000002    ""        
 3 clientweb             Client      Saisie             0 C-000003    ""        
 4 clientweb             Client      Saisie             0 C-000004    ""        
 5 clientweb             Client      Saisie             0 C-000005    ""        
 6 glebel                Manufactur… Saisie             0 C-000006    ""        
 7 info@groupenova.ca    Client      Saisie             0 C-000007    ""        
 8 alexcloutier2003@gma… Client      Saisie             0 C-000008    ""        
 9 dunintech             Manufactur… Saisie             0 C-000009    ""        
10 clientDunin           Client      Saisie             0 C-000010    ""        
# ℹ 3,878 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fact_kits  <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20,498 × 114
   code  nom      qte qteTr typeKit unit  sousTotalKit sousTotalKitEff sousTotal
   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;
 1 ""    Conto…     0     0 ""      ***              0               0         0
 2 ""    Conto…     0     0 ""      ***              0               0         0
 3 ""    Conto…     1     0 ""      ***              0               0         0
 4 ""    Conto…     0     0 ""      ***              0               0         0
 5 ""    Conto…     0     0 ""      ***              0               0         0
 6 ""    Conto…     0     0 ""      ***              0               0         0
 7 ""    Conto…     0     0 ""      ***              0               0         0
 8 ""    Conto…     0     0 ""      ***              0               0         0
 9 ""    Conto…     0     0 ""      ***              0               0         0
10 ""    Conto…     0     0 ""      ***              0               0         0
# ℹ 20,488 more rows
# ℹ 105 more variables: sousTotalEff &lt;dbl&gt;, totalComptoir &lt;dbl&gt;,
#   totalComptoirEff &lt;dbl&gt;, nbComptoir &lt;dbl&gt;, longComptoir &lt;dbl&gt;,
#   surfaceComptoir &lt;dbl&gt;, cumulComptoir &lt;dbl&gt;, extraComptoir &lt;dbl&gt;,
#   comptoirMod &lt;chr&gt;, comptoirCouleur &lt;chr&gt;, comptoirGpCouleur &lt;chr&gt;,
#   sousTotalCab &lt;dbl&gt;, sousTotalPanel &lt;dbl&gt;, sousTotalMoulure &lt;dbl&gt;,
#   sousTotalAutre &lt;dbl&gt;, assemblage &lt;chr&gt;, gamme &lt;chr&gt;, serie &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>fact_lumieres  <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 942 × 3
   modele         qte contrat_id 
   &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;      
 1 PUCK120mm_NI     2 P-000390-S1
 2 PUCK79mm_NI      5 P-000390-S1
 3 PUCK79mm_WH      4 P-000390-S2
 4 PUCK79mm_WH      4 P-000554-S1
 5 PUCK79mm_WH      3 P-000715-S1
 6 PUCK79mm_WH      7 P-000715-S2
 7 PUCK79mm_NI      7 P-000773-S1
 8 PUCK120mm_NI     2 P-000907-S7
 9 PUCK79mm_NI      6 P-000907-S7
10 PUCK79mm_BL      3 P-000930-S1
# ℹ 932 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>transactions <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,818 × 47
   code  nomClient codeClient2 typeClient delaiPrevExped nbJourValide statutCred
   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt; &lt;lgl&gt;     
 1 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 2 C-00… ""        ""          particuli…              2           90 FALSE     
 3 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 4 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 5 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 6 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 7 C-00… ""        ""          particuli…              2           90 FALSE     
 8 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
 9 C-00… ""        ""          particuli…              2           90 FALSE     
10 C-00… "Avivia"  "Avivia"    particuli…              2           90 FALSE     
# ℹ 3,808 more rows
# ℹ 40 more variables: validCred &lt;lgl&gt;, total &lt;dbl&gt;, totalHT &lt;dbl&gt;,
#   sousTotal &lt;dbl&gt;, sousTotal2 &lt;dbl&gt;, totalLivraison &lt;dbl&gt;,
#   totalInstall &lt;dbl&gt;, totalCEM &lt;dbl&gt;, qteItems &lt;dbl&gt;, qteItemsCab &lt;dbl&gt;,
#   promotions &lt;dbl&gt;, createurNom &lt;chr&gt;, createurCourriel &lt;chr&gt;,
#   division &lt;chr&gt;, projet_id &lt;chr&gt;, estImport &lt;lgl&gt;, estReprise &lt;lgl&gt;,
#   estCQ &lt;lgl&gt;, avecLivraison &lt;lgl&gt;, installation &lt;lgl&gt;, totalTx1 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dim_dates  <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 660 × 8
    date_id date       annee  mois nom_mois  jour jour_semaine nom_jour
      &lt;int&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;int&gt;        &lt;int&gt; &lt;chr&gt;   
 1 20220721 2022-07-21  2022     7 juillet     21            4 jeudi   
 2 20221012 2022-10-12  2022    10 octobre     12            3 mercredi
 3 20221013 2022-10-13  2022    10 octobre     13            4 jeudi   
 4 20221014 2022-10-14  2022    10 octobre     14            5 vendredi
 5 20221018 2022-10-18  2022    10 octobre     18            2 mardi   
 6 20221019 2022-10-19  2022    10 octobre     19            3 mercredi
 7 20221025 2022-10-25  2022    10 octobre     25            2 mardi   
 8 20221026 2022-10-26  2022    10 octobre     26            3 mercredi
 9 20221027 2022-10-27  2022    10 octobre     27            4 jeudi   
10 20221028 2022-10-28  2022    10 octobre     28            5 vendredi
# ℹ 650 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>dim_projets  <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,035 × 13
   projet_id marche   division   courrielContact  nomContact   telephoneContact
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;           
 1 P-000001  ""       Division_1 "info@avivia.ca" "Mr Contact" ""              
 2 P-000002  ""       Division_1 ""               ""           ""              
 3 P-000004  ""       Division_1 ""               ""           ""              
 4 P-000006  ""       Division_1 ""               ""           ""              
 5 P-000011  ""       Division_1 ""               ""           ""              
 6 P-000013  ""       Division_1 "info@avivia.ca" "Mr Contact" ""              
 7 P-000018  ""       Division_1 ""               ""           ""              
 8 P-001796  "Quebec" Division_1 ""               ""           ""              
 9 P-000003  ""       Division_1 "info@avivia.ca" "Mr Contact" ""              
10 P-000005  ""       Division_1 "info@avivia.ca" "Mr Contact" ""              
# ℹ 2,025 more rows
# ℹ 7 more variables: coordsCommTxt &lt;chr&gt;, coordsExpedTxt &lt;chr&gt;,
#   coordsFactTxt &lt;chr&gt;, estReprise &lt;lgl&gt;, enFusion &lt;lgl&gt;, createurNom &lt;chr&gt;,
#   createurCourriel &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dim_representants  <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,035 × 4
   representant_id nom         codeRepresentant projet_id
             &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;    
 1               1 "Mr Robert" "003"            P-000001 
 2               2 ""          ""               P-000002 
 3               3 ""          ""               P-000004 
 4               4 ""          ""               P-000006 
 5               5 ""          ""               P-000011 
 6               6 "Mr Robert" "003"            P-000013 
 7               7 ""          ""               P-000018 
 8               8 ""          ""               P-001796 
 9               9 "Mr Robert" "003"            P-000003 
10              10 "Mr Robert" "003"            P-000005 
# ℹ 2,025 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dim_clients <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,532 × 4
   client_id nom      type        transaction_id
       &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;         
 1         1 "Avivia" particulier C-000089      
 2         2 ""       particulier C-000093      
 3         3 "Avivia" particulier C-000115      
 4         4 "Avivia" particulier C-000119      
 5         5 "Avivia" particulier C-000142      
 6         6 "Avivia" particulier C-000175      
 7         7 ""       particulier C-000330      
 8         8 "Avivia" particulier C-000344      
 9         9 ""       particulier C-000090      
10        10 "Avivia" particulier C-000220      
# ℹ 4,522 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>dim_adresses <span class="sc">|&gt;</span> <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,263 × 14
   codePost etatProv ligne1          ligne2 pays  region ville usage code  sorte
   &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 G0X2B0   Quebec   20 Route Goulet ""     Cana… R1     Sain… Fact  Fact  ""   
 2 G0A1L0   Quebec   110, route 138  ""     Cana… R1     Cap-… Exped Show… "WAR…
 3 G0X2B0   Quebec   20 Route Goulet ""     Cana… R1     Sain… Fact  Fact  ""   
 4 G0A1L0   Quebec   110, route 138  ""     Cana… R1     Cap-… Exped Show… "WAR…
 5 G0X2B0   Quebec   20 Route Goulet ""     Cana… R1     Sain… Fact  Fact  ""   
 6 G0A1L0   Quebec   110, route 138  ""     Cana… R1     Cap-… Exped Show… "WAR…
 7 G0X2B0   Quebec   20 Route Goulet ""     Cana… R1     Sain… Fact  Fact  ""   
 8 G0A1L0   Quebec   110, route 138  ""     Cana… R1     Cap-… Exped Show… "WAR…
 9 G0X2B0   Quebec   20 Route Goulet ""     Cana… R1     Sain… Fact  Fact  ""   
10 G0A1L0   Quebec   110, route 138  ""     Cana… R1     Cap-… Exped Show… "WAR…
# ℹ 21,253 more rows
# ℹ 4 more variables: projet_id &lt;chr&gt;, nom &lt;chr&gt;, contact &lt;chr&gt;,
#   adresse_id &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="conclusion" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Conclusion</h1>
<p>Ce modèle dimensionnel constitue la fondation analytique du système décisionnel à implementer dans la phase 2 . Il transforme des données opérationnelles complexes en une structure optimisée pour l’analyse business, respectant les bonnes pratiques du data warehousing tout en préservant la richesse informationnelle des sources. L’architecture modulaire facilite la maintenance et permet une évolution contrôlée selon les besoins métier émergents.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../scripts/data_cleaning.html" class="pagination-link" aria-label="Néttoyage et transformations des données">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Néttoyage et transformations des données</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/datchaa/dunin_etl/blob/main/scripts/data_loading.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>